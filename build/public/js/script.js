/*! anonymity 21-11-2016 */
function wordCount(a){return a=a.trim(),word_array=a.replace(/\r?\n|\r/g," "),word_array=word_array.replace(/\s\s+/g," "),word_array=word_array.split(" "),word_array.length}function getRandomPositionTop(){var a=$("#main").offset().top,b=a+$("#main").height(),c=Math.random()*a,d=b+Math.random()*($(document.body).height()-b),e=Math.random();return e<.5?c:d}function getRandomPositionLeft(){var a=$("#main").offset().left,b=a+$("#main").width(),c=Math.random()*a,d=b+Math.random()*($(document.body).width()-b),e=Math.random();return e<.5?c:d}var timesSubmitted=0,interval,skip=0;$(document).ready(function(){var a=io();a.on("refresh feed",function(a){$(".words-body").prepend("<span style = 'color:"+a.color+";font-weight:"+a.weight+"'>"+a.words+"</span>");var b=getRandomPositionTop(),c=getRandomPositionLeft(),d=a.words.trim();d=d.slice(0,-1);var e=$("<div />").addClass("row pop-up-box").css({left:c,top:b});e.append("<div class='col-md-12' style = 'color:"+a.color+";font-weight:"+a.weight+"'>"+d+"</div>"),$(document.body).append(e),e.hide().fadeIn("slow"),e.delay("2000").fadeOut("slow")}),$("#input_box").on("input",function(){var a=wordCount($("#input_box").val()),b=$("#input_box").val().split("").length;$("#wordcount").text("Word Count : "+a),$("#chara_count").text("Character Count : "+b),""===$("#input_box").val()&&$("#wordcount").text("Word Count : 0"),a>50?$("#input_box").keypress(function(a){a.preventDefault()}):$("#input_box").off("keypress")}),$.get("/all?skip=0&limit=500",function(a){for(var b=0;b<a.length;b++)$(".words-body").append("<span style = 'color:"+a[b].color+";font-weight:"+a[b].weight+"'>"+a[b].words+"</span>");skip=500}),$("#comment").submit(function(){if(interval||(interval=setTimeout(function(){interval=void 0,timesSubmitted=0},1e4)),timesSubmitted++,timesSubmitted>5)return $("#error_msg").text("Too many submit attempts!!").fadeIn("slow").delay("2000").fadeOut("slow"),!1;var a=wordCount($("#input_box").val()),b=$("#input_box").val().split("").length;return a>50||b>500?($("#error_msg").text("You exceed 50 words or 500 characters"),!1):($(this).ajaxSubmit({error:function(a){console.log(a.status)},success:function(a){console.log(a)}}),!1)});$(window).scroll(function(a){$(window).scrollTop()+$(window).height()==$(document).height()&&$.get("/all?skip="+skip+"&limit=500",function(a){for(var b=0;b<a.length;b++)$(".words-body").append("<span style = 'color:"+a[b].color+";font-weight:"+a[b].weight+"'>"+a[b].words+"</span>");skip+=500})})});